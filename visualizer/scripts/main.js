var yamazaki=function(e,t){"use strict";var n={};return e.GLOBALS=Object.freeze({parse:{key1:"9CqsDKHNK3zKxYKsOUik8n3gE4qusfIgU2NRDh5m",key2:"UR2IOAd8kxtPRfSoCEeGcmfxMLiXGl16acr4lg6S"},slider:{height:960,width:1600}}),n.getViewportDimensions=function(){return{width:n.getWidth(),height:n.getHeight()}},n.getHeight=function(){return t(window).height()},n.getWidth=function(){return t(window).width()},e.Utils=Object.freeze(n),e}(yamazaki||{},jQuery),yamazaki=function(e,t){"use strict";var n,i={},r={slidesChannel:[],picturesChannel:[]};return i.Config=function(e){e=e||{},this.eventId=t.prop(e.eventId||"test-event"),this.pollInterval=t.prop(e.pollInterval?e.pollInterval:5e3),this.slideDuration=t.prop(e.slideDuration?e.slideDuration:3e3),this.animation=t.prop(e.animation||"slide"),this.loop=t.prop(e.loop?e.loop:!0),this.maxDisplayWindow=t.prop(e.maxDisplayWindow?e.maxDisplayWindow:5),this.showComments=t.prop(!1),this.theme=t.prop()},i.Change=function(e){this.timestamp=t.prop(new Date),this.message=t.prop(e.message)},i.Changelog=Array,i.vm=function(){var e={};return e.init=function(){e.shown=!1,e.changelog=new i.Changelog,e.updatePicturesSettings=function(){return i.notifyObservers("picturesChannel"),!1},e.updateSlidesSettings=function(){return i.notifyObservers("slidesChannel"),!1}},e}(),i.notifyObservers=function(e){r[e].forEach(function(e){e.call()})},i.controller=function(){i.vm.init()},i.view=function(){return t("form",[t("input",{onchange:t.withAttr("value",n.eventId),value:n.eventId()}),t("input",{onchange:t.withAttr("value",n.pollInterval),value:n.pollInterval()}),t("button",{onclick:i.vm.updatePicturesSettings},"Update"),t("input",{onchange:t.withAttr("value",n.slideDuration),value:n.slideDuration()}),t("input",{onchange:t.withAttr("value",n.animation),value:n.animation()}),t("button",{onclick:i.vm.updateSlidesSettings},"Update")])},i.init=function(e){return n=new i.Config(e),t.mount(document.getElementById("config-panel"),{controller:i.controller,view:i.view}),i.config=n,i},i.register=function(e,t){r[e].push(t)},e.Config={init:i.init,register:i.register},e}(yamazaki||{},m),yamazaki=function(e,t,n){"use strict";var i=function(){n.initialize(r()),e.Config.register("slidesChannel",a)},r=function(){return{controls:!0,progress:!0,margin:0,autoSlide:e.Config.config.slideDuration(),loop:e.Config.config.loop(),height:e.GLOBALS.slider.height,width:e.GLOBALS.slider.width,transition:e.Config.config.animation(),dependencies:[{src:"scripts/lib/plugin/add-remove.js",async:!0}]}},o=function(){return!!n},a=function(){n.configure(r())};return e.Slides={init:i,exists:o,configure:a,reveal:n},e}(yamazaki||{},jQuery,Reveal),yamazaki=function(e,t,n){"use strict";var i,r,o={},a=[],s=[],l=!1;return o.generateHtmlPhotoElements=function(e){return a=[],n.each(e,function(e,t){a.push(o.createHtmlPhotoSlide(t))}),a},o.createHtmlPhotoSlide=function(e){return"<section>"+o.createImgTag(e)+"</section>"},o.createImgTag=function(t){return"<img height="+(e.GLOBALS.slider.height-60)+'px" src="'+t.get("imageFile").url()+'" />'},o.getPictures=function(i){console.log("getting Pictures!");var o=n.Deferred(),a=t.Object.extend("UserPhoto"),s=new t.Query(a);return s.equalTo("eventIdentifier",e.Config.config.eventId()).greaterThan("createdAt",r).ascending("createdAt"),s.find({success:function(e){e&&e.length>0&&(r=e[e.length-1].createdAt,o.resolve(e)),o.reject()},error:function(e){console.log("Error: "+e.code+" "+e.message)}}),o},o.addPhotos=function(e){if(Reveal&&Reveal.add)n.each(e,function(e,t){Reveal.add(o.createImgTag(t))});else{var t=o.generateHtmlPhotoElements(e);n(".slides").append(t)}},o.render=function(){var e=n.Deferred();return o.getPictures().then(function(t){o.addPhotos(t),e.resolve()}),e},o.setPollInterval=function u(e){i=setTimeout(function(){o.render(),u(e)},e)},o.resetSlidesIfNeeded=function(){var t=e.Slides.reveal;if(l)for(var n=t.getTotalSlides();n>0;)t.remove(),n-=1},o.init=function(){r=new Date(0),s=[],a=[],o.resetSlidesIfNeeded(),o.render().then(function(){o.setPollInterval(e.Config.config.pollInterval()),l||(e.Slides.init(),e.Config.register("picturesChannel",o.init),l=!0)})},e.Pictures=Object.freeze({render:o.render,init:o.init,hide:o.hide,show:o.show}),e}(yamazaki||{},Parse,jQuery),yamazaki=function(e,t,n){"use strict";e.Config=e.Config.init({eventId:"test-event",slideDuration:3e3,pollInterval:5e3,animaton:"slideshow"});var i={};return i.initParse=function(){n.initialize(e.GLOBALS.parse.key1,e.GLOBALS.parse.key2)},i.init=function(){i.initParse(),t(document).ready(function(){e.Pictures.init()})},e.init=i.init,e}(yamazaki||{},jQuery,Parse);yamazaki.init();